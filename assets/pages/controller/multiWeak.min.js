$(document).ready(function(){function e(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),l=encodeURI(window.location.search).substr(1).match(t);return null!==l?decodeURI(l[2]):null}$("div:first").css("padding","0 15px");var t=null==e("fixheader"),l={bRetrieve:!0,language:{url:"../../../assets/pages/controller/DataTableLanguage.min.json"},lengthMenu:[[5,10,15,20,50,100,-1],[5,10,15,20,50,100,"所有"]],pageLength:20,dom:"1"==t?"<'clear'>R<'row tbTools' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>":"<'row tbTools' <'col-md-6 col-sm-12 pull-right'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",buttons:[{extend:"copyHtml5",exportOptions:{columns:":visible"},text:"复制",className:"btn red sbold btn-outline"},{extend:"excelHtml5",className:"btn yellow sbold btn-outline ",exportOptions:{columns:":visible"}},{extend:"csvHtml5",className:"btn purple sbold btn-outline ",exportOptions:{columns:":visible"}},{extend:"print",autoPrint:!0,text:"打印",exportOptions:{columns:":visible"},className:"btn grey-mint sbold btn-outline"},{extend:"colvis",text:'隐藏数据列<i class="fa fa-angle-down"></i>',className:"btn green-haze sbold btn-outline"}],bDeferRender:!0,bProcessing:!0,bStateSave:!0,bserverSide:!1,bInfo:!0,bAutoWidth:!0,bSortClasses:!1,bScrollInfinite:!0,searchHighlight:!0,colReorder:{realtime:!0},scroolY:"70v",scrollCollapse:!0,initComplete:function(e){var t=this.api();t.on("click","tbody td",function(){t.search(this.innerText.trim()).draw()});var l=t.row(0).data(),a=$.parseJSON(localStorage.getItem("DataTables_"+e.sInstance+"_"+location.pathname));t.columns().indexes().flatten().each(function(e){var o=t.column(e);if(isNaN(l[e])){var n=$('<select class="select2"><option value="">所有'+$('thead th[data-column-index="'+e+'"]').text()+"</option></select>").appendTo($(o.footer()).empty()).on("change",function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());o.search(e?"^"+e.replace("\\","")+"$":"",!0,!1).draw()});o.data().unique().sort().each(function(e,t){n.append('<option value="'+e+'">'+e+"</option>")});var r=a.columns[a.ColReorder[e]].search.search;r.length&&(r=r.substring(1,r.length-1).replace("\\",""),n.val(r))}}),$.fn.select2.defaults.set("theme","bootstrap"),$(".select2, .select2-multiple").select2({width:null})}};"1"==t&&(l.fixedHeader={header:!0,footer:!0,headerOffset:0});var a=e("cart");$("h1").html('<a href="http://10.8.2.133/search/#'+a+'" target="_blank" alt="点击查看生产详情">'+a+"</a> 机台连续废通知记录"),$.ajax({url:"http://10.8.2.133/datainterface/api?ID=538&cart="+a}).done(function(e){(e=JSON.parse(e)).header=[{title:"序号"}].concat(e.header);var t=e.header.map(function(e){return"<th>"+e.title+"</th>"}),a=e.data.map(function(e,t){var l=e.map(function(e){return"<td>"+e+"</td>"});return"<tr>"+["<td>"+(t+1)+"</td>"].concat(l).join("")+"</tr>"});$("tbody").html(a.join("")),$("table thead,table tfoot").html("<tr>"+t.join("")+"</tr>"),$("table").DataTable(l)})});