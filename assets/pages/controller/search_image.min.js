var imageSearch=function(){function e(){i=window.location.hash.replace("#","");var e=judgeSearchType(i);if(""!=i)switch(e){case config.search.REEL:window.location.href="/search/paper#"+i;break;case config.search.CART:c(i);break;default:bsTips("请输入有效的车号信息"),showPanel=!0}else $("#js-grid-juicy-projects").addClass("cbp-ready").append('<div class="cbp-search-nothing"><h3>请在顶栏搜索框输入车号信息</h3></div>')}function t(e){var t=new JSZip;t.file("README.txt","这是一个由质量信息系统自动生成的图像压缩包"),$("a.cbp-lightbox").map(function(e,i){var a=$(i),o=a.data("title").split("<br>"),c=[];c.push(o[1].replace(/\W/g,"")+"K"),c.push(o[0].replace(/\W/g,"")),c.push("cam"+o[2].replace(/\W/g,""));var n=c.join("_")+".jpg",r=a.attr("href").split("data:image/jpg;base64,")[1];t.file(n,r,{base64:!0})}),t.generateAsync({type:"blob"}).then(function(t){saveAs(t,e+".zip")})}var i,a=!1;$(window).bind("hashchange",function(){e()});var o={},c=function(){o={cur:0,total:2,noData:!0},$("#js-grid-juicy-projects").html(""),n(309,"banknote"),"8"==i.substring(3,2)&&(n(310,"screen"),o.total=3),n(311,"code")},n=function(e,t){var a=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&M=3&blob=3;&ID="+e+"&cache=14400&cart="+i,c="";$.ajax({url:a}).done(function(e){"string"==typeof e&&(e=$.parseJSON(e)),o.cur++,e.rows>0&&(o.noData=!1,e.type=t,c=tpl.getHTML("image/fakeimg.etpl",e),$("#js-grid-juicy-projects").append(c)),o.cur==o.total&&(o.noData?$("#js-grid-juicy-projects").addClass("cbp-ready").append('<div class="cbp-search-nothing"><h3>当前时间内无相关信息</h3></div>'):r())})},r=function(){var e,t=function(){$("#js-grid-juicy-projects").cubeportfolio({filters:"#js-filters-juicy-projects,#js-filters-juicy-projects2",search:"#js-search-blog-posts",layoutMode:"grid",defaultFilter:"*",animationType:"quicksand",gapHorizontal:35,gapVertical:30,gridAdjustment:"responsive",mediaQueries:[{width:1500,cols:7},{width:1100,cols:6},{width:800,cols:5},{width:480,cols:3},{width:320,cols:2}],caption:"overlayBottomAlong",displayType:"default",lightboxDelegate:".cbp-lightbox",lightboxGallery:!0,lightboxTitleSrc:"data-title",lightboxCounter:'<div class="cbp-popup-lightbox-counter">{{current}} of {{total}}</div>',singlePageDelegate:null},function(){bsTips("数据渲染完毕",1)})};a?(e.destroy(),$("#js-grid-juicy-projects").cubeportfolio("destroy",t)):(t(),e=new ClipboardJS(".hoverZoomLink")),a=!0};return $("#download").on("click",function(){t(i)}),{init:function(){hideSidebarTool();tpl.init(["image/fakeimg.etpl"],e)}}}();$(document).ready(function(){whiteBackground(),UIIdleTimeout.init(),initDom(0),imageSearch.init()});