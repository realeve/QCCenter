var store,manualFluorance=function(){function t(){var t=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=35&M=3&t=1&cache=14400";$.ajax({url:t}).done(function(t){var a=handleAjaxData(t);a.data.forEach(function(t){store.state.operatorList.push({value:t[0],name:t[1]})}),initSelect2(),$(".select2").on("select2:select",function(){store.state.user_id=$(this).val()})})}function a(){var t=store.state.basic.rec_date.data.replace(/-/g,"");t=t.replace(/-/g,"");var a=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=328&M=3&tstart="+t+"&tend="+t;$.ajax({url:a}).done(function(t){var a=handleAjaxData(t);store.state.tbl=a})}function e(){var t=store.state.basic.cartnumber.data.toUpperCase(),a=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=328&M=0&cart="+t+"&cache="+config.cache;$.ajax({url:a}).done(function(t){var a=handleAjaxData(t);if(0==a.rows)return void bsTips("读取车号信息失败，请按F5刷新页面重试");var e=a.data[0];store.state.basic.gznumber.data=e.CarNumber.trim()+e.GzNumber.trim(),store.state.basic.monitor.data=e.MonitorName,store.state.basic.captain.data=e.CaptainName,store.state.basic.print_date.data=e.StartDate}).error(function(t){infoTips("读取车号信息失败，请按F5刷新页面重试"),console.log(t)})}function r(){var r={template:"#my-input-template",props:["param","name"]},n={template:"#my-table-template",props:["tbl"]},i=["332 | 333 | 665 | 666 | 999 | 000","111 | 112 | 444 | 445 | 777 | 778"];store=new Vuex.Store({state:{params:[{name:"千位",data:"0",key:"kilo",type:"number",max:9,min:0},{name:"小号",data:i[0],key:"codenum",disabled:!0},{name:"质量情况正常",data:"是",key:"desc"},{name:"质量问题开位",data:"无",key:"formatpos"},{name:"质量问题类型",data:"无",key:"type"},{name:"备注",data:"无",key:"remark"}],basic:{cartnumber:{name:"车号",data:"",hasError:!1,errinfo:"",maxlength:8},rec_date:{name:"人工检测时间",data:today(6),"class":"date-picker"},gznumber:{name:"大万号",data:"",disabled:!0},monitor:{name:"班组",data:"",disabled:!0},captain:{name:"机长",data:"",disabled:!0},print_date:{name:"印码时间",data:"","class":"date-picker",disabled:!0}},user_id:"",tbl:{rows:0},operatorList:[{value:0,name:""}]},mutations:{submit:function(){if(!s()){var t=store.state,a={};for(var e in t.basic)a[e]=t.basic[e].data;t.params.forEach(function(t){a[t.key]=t.data}),store.state.params[0].data<9?store.state.params[0].data++:(store.state.params[0].data=0,store.state.basic.cartnumber.data="",store.commit("reset")),a.user_id=store.state.user_id,a.cartnumber=a.cartnumber.toUpperCase(),o(a)}},reset:function(){for(var t in store.state.basic)"rec_date"!=t&&(store.state.basic[t].data="")},loadHisData:function(){a()}}});new Vue({el:"#basic",store:!0,components:{"my-input":r},computed:{basic:function(){return store.state.basic},cartnumber:function(){return store.state.basic.cartnumber.data}},watch:{cartnumber:function(){s()||e()}}}),new Vue({el:"#report",store:!0,data:{portletName:"质量抽检情况"},components:{"my-input":r},computed:{params:function(){return store.state.params},kilo:function(){return store.state.params[0].data},operatorList:function(){return store.state.operatorList}},watch:{kilo:function(t){store.state.params[1].data=i[t%2]}},methods:{submit:function(){store.commit("submit")},reset:function(){store.commit("reset")},loadHisData:function(){store.commit("loadHisData")}},mounted:function(){t()}}),new Vue({el:"#sheet",store:!0,components:{"my-table":n},computed:{tbl:function(){return store.state.tbl}}})}function o(t){var e=getRootPath()+"/DataInterface/insert";t.tbl=TBL.PRINT_MANUALFLUORANCE,t.utf2gbk=["remark","monitor","captain","desc","formatpos","type"],t.rec_time=today(1);var r={url:e,type:"post",resetForm:!0,data:t,success:function(t){var e=$.parseJSON(t);bsTips(e.message,e.type),a()},error:function(t){infoTips(JSON.stringify(t))}};return $.ajax(r),!1}var n=function(){$.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"清除",format:"yyyy年mm月dd日",titleFormat:"yyyy年mm月",weekStart:1},jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"yyyy-mm-dd",language:"zh-CN"}).on("changeDate",function(t){store.state.basic.rec_date.data=t.date.toLocaleString().replace(/\/|年|月/g,"-").replace(/日/g,"").split(" ")[0]})},s=function(){var t=store.state.basic.cartnumber;return 0===t.data.length?(store.state.basic.cartnumber.hasError=!0,store.state.basic.cartnumber.errinfo="车号为必填项"):judgeSearchType(t.data)!=config.search.CART?(store.state.basic.cartnumber.hasError=!0,store.state.basic.cartnumber.errinfo="请输入正确的车号信息"):(store.state.basic.cartnumber.hasError=!1,store.state.basic.cartnumber.errinfo=""),store.state.basic.cartnumber.hasError};return{init:function(){$(".page-header .dropdown-quick-sidebar-toggler").hide(),r(),n()}}}();jQuery(document).ready(function(){manualFluorance.init(),initDom()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=printManualFluorance.min.js.map